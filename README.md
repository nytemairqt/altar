# Altar

Altar is a free, open-source guitar amplifier. 

![](altar.jpg)

Built with HISE: https://hise.dev/  

### Modifications to HISE Source Code

Altar depends on several small fixes to the HISE source. They are included in the /HISE/ subfolder of this repository.

Read [HISE](./HISE/HISE.md) for more information. 

### Dependencies

Altar uses multiple HISE ThirdParty nodes with their own dependencies. They are included in the /DspNetworks/ThirdParty/src/dependencies folder and are (should be) compatible with GPL-3:

JSON: https://github.com/nlohmann/json/  
math_approx: https://github.com/Chowdhury-DSP/math_approx  
RTNeural: https://github.com/jatinchowdhury18/RTNeural  
RTNeural-NAM: https://github.com/jatinchowdhury18/RTNeural-NAM  
rubberband: https://github.com/breakfastquay/rubberband  
xsimd: https://github.com/xtensor-stack/xsimd  

Read [DEPENDENCIES](./DspNetworks/ThirdParty/src/dependencies/DEPENDENCIES.md) for more information.

### Windows

TBA

### MacOS

TBA

### Linux

These are the modified instructions from David Healey's Bootcamp Cheat Sheet. I highly recommend signing up for the bootcamp:

https://audiodevschool.com/courses/hise-bootcamp/

Assuming a fresh install (I used Linux Mint):

#### Install prerequisites

```
sudo apt update

sudo apt-get -y install build-essential git make binutils-gold libfreetype6-dev
libx11-dev libxinerama-dev libxrandr-dev libxcursor-dev mesa-common-dev
libasound2-dev freeglut3-dev libxcomposite-dev libcurl4-gnutls-dev libgtk-3-dev
libjack-jackd2-dev libwebkit2gtk-4.1-dev
```

#### Install & Alias Mold Linker

Install mold:

`sudo apt install mold`

Alias:

```
nano ~/.bashrc

# add this line:
alias gold="mold"
```

Apply changes & test:

```
source ~/.bashrc
gold --version
```

#### Install Source Code Pro Font

Download: https://fonts.google.com/specimen/Source+Code+Pro
Extract to: `~/.fonts/SourceCodePro`
Move fonts from `static/` subfolder to the top-level folder.

#### Install FFTW (GPL Compatible)

`sudo apt install libfftw3-dev`

```
nano ~/.bashrc

# add these lines:
export FFTWROOT=/usr/lib/x86_64-linux-gnu
export CPATH=$FFTWROOT/include:$CPATH
export LIBRARY_PATH=$FFTWROOT/lib:$LIBRARY_PATH
export LD_LIBRARY_PATH=$FFTWROOT/lib:$LD_LIBRARY_PATH
```

Apply changes:

`source ~/.bashrc`

#### Clone & Setup HISE

Merge the HISE subfolder of Altar:

`Altar/HISE/`

into the HISE repo, check "Replace" to overwrite existing files. Then extract the SDK:

`HISE/tools/SDK/sdk.zip`

The ASIOSDK2.3 and VST3 SDK folders need to be in the SDK folder, NOT the auto-generated "sdk" folder created by unzipping. EG:

```
HISE/tools/SDK/ASIOSDK2.3
HISE/tools/SD/VST3 SDK
```

#### Modify Projucer File

Now open the Projucer `HISE/tools/projucer/projucer` and drag the HISE Jucer file:

`HISE/projects/standalone/HISE Standalone.jucer` inside the Projucer.

#### Enable FFTW3: 

Add to Extra Preprocessor Definitions:

```
AUDIOFFT_FFTW3=1
HI_ENABLE_CUSTOM_NODES=1
```

Add to Extra Linker Flags:

`-lfftw3f`

Enable in modules -> juce_dsp:

`JUCE_DSP_USE_STATIC_FFTW`

#### Save & Build HISE

Save Projucer project (File -> Save)

```
cd projects/standalone/Builds/LinuxMakefile
make clean
make CONFIG=Release -j 4
```

#### Fix Compiler Settings

Ctrl + H to view Hidden Files.

`~/.config/HISE/compilerSettings.xml`

Add the HISE Root folder to the HisePath variable.

Then copy the entire file to:

`~/.hise/compilerSettings.xml`

#### Open Altar Project for Compiling ThirdParty Nodes

Start HISE, `File -> Load Project -> Altar Root Folder`

DON'T OPEN THE XML. Instead, compile the ThirdParty Nodes:

`Export -> Compile DSP networks as dll`

This will generate: 

`Altar/DspNetworks/Binaries/`

Open the `AutoGeneratedProject.jucer` file in Projucer, click the Project Settings cogwheel.  

Scroll down and set the C++ Language Standard to C++ 20. Save & close Projucer file.

Now run `./batchCompileLinux.sh` to compile the ThirdParty Nodes.

#### Open Altar Project for Exporting Plugin

Open HISE again, this time you can open the Altar.xml.

`Export -> Export as FX plugin`

This will create a Binaries subfolder:

`Altar/Binaries/`

Open the AutoGeneratedProject.jucer file here in Projucer and once again, set the C++ Language Standard to C++ 20. Save & Close.

Now run the `./batchCompileLinux.sh` script here to export the plugin. 

The final export is the ENTIRE Altar.vst3 folder.